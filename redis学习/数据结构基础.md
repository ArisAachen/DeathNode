## 说明

redis 有吴忠基础数据结构 
1. string
2. set (无序集合)
3. zset (有序集合)
4. hash (字典)
5. list (列表)


## 数据库库
1. redis 默认有16个数据库    
2. 使用select命令进行切换
``` shell
➜  Desktop redis-cli 
127.0.0.1:6379> SELECT 1
OK
127.0.0.1:6379[1]> SELECT 0
OK
```
3. 所有库使用同一个密码
4. dbsize 当前key数量
5. flushdb 清空当前库
6. flushall 清空所有库
``` shell
127.0.0.1:6379> set name aris
OK
127.0.0.1:6379> DBSIZE
(integer) 1
127.0.0.1:6379> flushdb
OK
127.0.0.1:6379> DBSIZE
(integer) 0
```

## 键

``` shell
// 添加key
127.0.0.1:6379> set k1 aris
OK
127.0.0.1:6379> set k2 test
OK
// 列出所有keys
127.0.0.1:6379> keys *
1) "k1"
2) "k2"
// 删除key
127.0.0.1:6379> del k2
(integer) 1
127.0.0.1:6379> keys *
1) "k1"
// 设置过期时间
127.0.0.1:6379> EXPIRE k1 3
(integer) 1
127.0.0.1:6379> keys *
(empty list or set)
127.0.0.1:6379> 
```


``` shell
// 添加key
127.0.0.1:6379> set k1 aris
OK
// 设置过期时间
127.0.0.1:6379> EXPIRE k1 20
(integer) 1
// 大小写敏感
127.0.0.1:6379> TTL K1
(integer) -2
// 查看过期时间
127.0.0.1:6379> TTL k1
(integer) 8
127.0.0.1:6379> 
```


## string
二进制安全, 意思是内容如果可以用字符串表示都可以保存， 例如jpg图片   
一个string的value可以到512M   
操作是原子性的，因为redis是单线程

底层类似于 Java 的 ArrayList, 预分配

``` shell
// 设置 k1
127.0.0.1:6379> set k1 aris
OK
// 往对应的value后加
127.0.0.1:6379> append k1 -test
(integer) 9
// 长度
127.0.0.1:6379> STRLEN k1
(integer) 9
// 覆盖
127.0.0.1:6379> set k1 aris
OK
// 如果存在，则不会覆盖
127.0.0.1:6379> SETNX k1 test
(integer) 0
127.0.0.1:6379> get k1
"aris"
``

``` shell
// +1 
127.0.0.1:6379> INCR k2
(integer) 2
127.0.0.1:6379> GET k2
"2"
// -1
127.0.0.1:6379> DECR k2
(integer) 1
// +2
127.0.0.1:6379> INCRBY k2 2
(integer) 3
// -2
127.0.0.1:6379> DECRBY k2 2
(integer) 1
```

``` shell
// 设置多个值
127.0.0.1:6379> MSET k1 aris k2 uos k3 test
OK
127.0.0.1:6379> MGET k1 k2 k3
1) "aris"
2) "uos"
3) "test"
// 未设置成功，只要有一个存在，则其他的都失败
127.0.0.1:6379> MSETNX k4 test k5 test k1 test
(integer) 0
127.0.0.1:6379> MGET k1 k2 k3 k4 k5
1) "aris"
2) "uos"
3) "test"
4) (nil)
5) (nil)
```

``` shell
127.0.0.1:6379> append k1 -test
(integer) 9
// 获取字符串的 index
127.0.0.1:6379> GETRANGE k1 0 3
"aris"
127.0.0.1:6379> set k6 100000
OK
// 可以用来获取数字
127.0.0.1:6379> GETRANGE k6 0 3
"1000"
```

``` shell
// 设置过期时间
127.0.0.1:6379> SETEX k7 20 test
OK
127.0.0.1:6379> TTL k7
(integer) 14
127.0.0.1:6379> GET k7
"test"
// 新值换旧值
127.0.0.1:6379> GETSET k1 test
"aris-test"
127.0.0.1:6379> GET k1
"test"
```
